import{_ as m}from"./snow-icon-0ZfUMMj8.js";import{I as h}from"./InlineLoading-BSQONkBM.js";import{u as y,s as u,o as w,I as B,l as I,A as S,a as l,b as s,f as x,e as k,i as F,B as o,y as N,x as A,t as D,h as r}from"./index-B5e8OS6O.js";import{u as T}from"./userStore-NQFUlvij.js";const V=""+new URL("../images/copy-icon.svg",import.meta.url).href,$={class:"relative py-5 top-55 w-[90%] max-w-[650px] mx-auto sm:py-0 sm:top-90"},j={class:"bg-white shadow-md p-8 sm:p-10"},C={key:0,class:"w-full p-10 text-center"},L={key:1,class:"ani-fade"},R={class:"text-center text-sm sm:text-base"},U={class:"w-fit flex mt-10 max-w-[500px] mx-auto gap-x-10 gap-y-4 flex-col sm:flex-row"},E={class:"sm:flex-1"},M={class:"flex mb-4 items-center"},z={class:"flex mb-4 items-center"},G={class:"flex items-center"},O={class:"sm:flex-1"},P={class:"flex items-center"},q={key:0,class:"text-sm sm:text-base mt-1.5 border-b border-gray-200 pb-1 w-fit"},H={class:"flex items-center mt-4"},J={class:"flex gap-3"},K={class:"font-bold"},ss={__name:"Step3",setup(Q){const f=B(),{currency:v}=A(),d=y(),{isInlineLoading:i}=u(d),{pushMessage:n}=d,p=T(),{step:_,orderId:c}=u(p);w(()=>{_.value=3,localStorage.getItem("orderId")?(c.value=localStorage.getItem("orderId"),b()):f.push("/")});const t=I({user:{}});async function b(){i.value=!0;let a=`https://vue3-course-api.hexschool.io/api/flurrypop-api/order/${c.value}`;try{const e=await S.get(a);e&&(t.value=e.data.order)}catch(e){console.error(e)}finally{i.value=!1}}async function g(){try{await navigator.clipboard.writeText(t.value.id),n(!0,"已複製訂單編號！")}catch(a){n(!1,"複製失敗："+a)}}return(a,e)=>(r(),l("div",$,[s("div",j,[x(i)?(r(),l("div",C,[k(h)])):(r(),l("div",L,[e[6]||(e[6]=s("div",{class:"flex items-center gap-2 justify-center mb-5"},[s("img",{src:m,alt:"",class:"h-4 sm:h-5"}),s("span",{class:"serif text-lg sm:text-2xl font-bold text-[#3F88B4]"},"訂單完成"),s("img",{src:m,alt:"",class:"h-4 sm:h-5 scale-x-[-1]"})],-1)),s("div",{onClick:g,class:"cursor-pointer text-[#7DB14A] font-bold flex flex-col sm:flex-row gap-x-2 justify-center items-center hover:opacity-80"},[e[0]||(e[0]=s("div",{class:"flex items-center gap-2 justify-center text-sm sm:text-base"},[s("img",{src:V,alt:"",class:"h-3 sm:h-4"}),F("訂單編號")],-1)),s("div",R,o(t.value.id),1)]),s("div",U,[s("div",E,[s("div",M,[e[1]||(e[1]=s("div",{class:"text-sm sm:text-base font-bold text-[#3F88B4] w-20"},"姓名",-1)),s("div",null,o(t.value.user.name),1)]),s("div",z,[e[2]||(e[2]=s("div",{class:"text-sm sm:text-base font-bold text-[#3F88B4] w-20"},"電話",-1)),s("div",null,o(t.value.user.tel),1)]),s("div",G,[e[3]||(e[3]=s("div",{class:"text-sm sm:text-base font-bold text-[#3F88B4] w-20"},"Email",-1)),s("div",null,o(t.value.user.email),1)])]),s("div",O,[s("div",P,[e[4]||(e[4]=s("div",{class:"text-sm sm:text-base font-bold text-[#3F88B4] w-20"},"寄送方式",-1)),s("div",null,o(t.value.user.address=="實體店取貨"?"實體店取貨":"宅配"),1)]),t.value.user.address!="實體店取貨"?(r(),l("div",q,o(t.value.user.address),1)):N("",!0),s("div",H,[e[5]||(e[5]=s("div",{class:"text-sm sm:text-base font-bold text-[#3F88B4] w-20"},"付款狀態",-1)),s("div",J,[s("div",K,"NT$ "+o(x(v)(t.value.total)),1),s("div",{class:D([t.value.is_paid?"text-[#7DB14A]":"text-[#D8473A]","font-bold"])},o(t.value.is_paid?"已付款":"未付款"),3)])])])])]))])]))}};export{ss as default};
