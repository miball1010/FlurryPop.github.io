import{_ as H,u as X,s as q,l as O,z as Y,o as J,A as K,m as Q,k as z,w as _,r as W,h as g,a as S,f,e as E,b as s,i as u,B as D,F as R,j as U,x as Z,p as ee,t as F,v as te}from"./index-CUlOG4Po.js";import{B as se}from"./BaseLayout-dRTwyhXJ.js";import{I as ie}from"./InlineLoading-BUk9YGpJ.js";import{u as re}from"./userStore-ClwLFrP7.js";import{g as oe,i as le,e as ne,n as $,b as j,S as G,N as ae,a as V}from"./navigation-Ba04LsoQ.js";function ue(L){let{swiper:e,extendParams:A,on:v}=L;A({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let x=!1,P=!1;e.thumbs={swiper:null};function C(){const r=e.thumbs.swiper;if(!r||r.destroyed)return;const t=r.clickedIndex,d=r.clickedSlide;if(d&&d.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof t>"u"||t===null)return;let c;r.params.loop?c=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10):c=t,e.params.loop?e.slideToLoop(c):e.slideTo(c)}function w(){const{thumbs:r}=e.params;if(x)return!1;x=!0;const t=e.constructor;if(r.swiper instanceof t){if(r.swiper.destroyed)return x=!1,!1;e.thumbs.swiper=r.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(le(r.swiper)){const d=Object.assign({},r.swiper);Object.assign(d,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new t(d),P=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",C),!0}function p(r){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const d=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():t.params.slidesPerView;let c=1;const a=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(c=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(c=1),c=Math.floor(c),t.slides.forEach(l=>l.classList.remove(a)),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let l=0;l<c;l+=1)ne(t.slidesEl,`[data-swiper-slide-index="${e.realIndex+l}"]`).forEach(n=>{n.classList.add(a)});else for(let l=0;l<c;l+=1)t.slides[e.realIndex+l]&&t.slides[e.realIndex+l].classList.add(a);const m=e.params.thumbs.autoScrollOffset,y=m&&!t.params.loop;if(e.realIndex!==t.realIndex||y){const l=t.activeIndex;let n,M;if(t.params.loop){const i=t.slides.find(k=>k.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);n=t.slides.indexOf(i),M=e.activeIndex>e.previousIndex?"next":"prev"}else n=e.realIndex,M=n>e.previousIndex?"next":"prev";y&&(n+=M==="next"?m:-1*m),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(n)<0&&(t.params.centeredSlides?n>l?n=n-Math.floor(d/2)+1:n=n+Math.floor(d/2)-1:n>l&&t.params.slidesPerGroup,t.slideTo(n,r?0:void 0))}}v("beforeInit",()=>{const{thumbs:r}=e.params;if(!(!r||!r.swiper))if(typeof r.swiper=="string"||r.swiper instanceof HTMLElement){const t=oe(),d=()=>{const a=typeof r.swiper=="string"?t.querySelector(r.swiper):r.swiper;if(a&&a.swiper)r.swiper=a.swiper,w(),p(!0);else if(a){const m=`${e.params.eventsPrefix}init`,y=l=>{r.swiper=l.detail[0],a.removeEventListener(m,y),w(),p(!0),r.swiper.update(),e.update()};a.addEventListener(m,y)}return a},c=()=>{if(e.destroyed)return;d()||requestAnimationFrame(c)};requestAnimationFrame(c)}else w(),p(!0)}),v("slideChange update resize observerUpdate",()=>{p()}),v("setTransition",(r,t)=>{const d=e.thumbs.swiper;!d||d.destroyed||d.setTransition(t)}),v("beforeDestroy",()=>{const r=e.thumbs.swiper;!r||r.destroyed||P&&r.destroy()}),Object.assign(e.thumbs,{init:w,update:p})}function de(L){let{swiper:e,extendParams:A,emit:v,once:x}=L;A({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function P(){if(e.params.cssMode)return;const p=e.getTranslate();e.setTranslate(p),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function C(){if(e.params.cssMode)return;const{touchEventsData:p,touches:r}=e;p.velocities.length===0&&p.velocities.push({position:r[e.isHorizontal()?"startX":"startY"],time:p.touchStartTime}),p.velocities.push({position:r[e.isHorizontal()?"currentX":"currentY"],time:$()})}function w(p){let{currentPos:r}=p;if(e.params.cssMode)return;const{params:t,wrapperEl:d,rtlTranslate:c,snapGrid:a,touchEventsData:m}=e,l=$()-m.touchStartTime;if(r<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(r>-e.maxTranslate()){e.slides.length<a.length?e.slideTo(a.length-1):e.slideTo(e.slides.length-1);return}if(t.freeMode.momentum){if(m.velocities.length>1){const o=m.velocities.pop(),h=m.velocities.pop(),b=o.position-h.position,N=o.time-h.time;e.velocity=b/N,e.velocity/=2,Math.abs(e.velocity)<t.freeMode.minimumVelocity&&(e.velocity=0),(N>150||$()-o.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=t.freeMode.momentumVelocityRatio,m.velocities.length=0;let n=1e3*t.freeMode.momentumRatio;const M=e.velocity*n;let i=e.translate+M;c&&(i=-i);let k=!1,I;const B=Math.abs(e.velocity)*20*t.freeMode.momentumBounceRatio;let T;if(i<e.maxTranslate())t.freeMode.momentumBounce?(i+e.maxTranslate()<-B&&(i=e.maxTranslate()-B),I=e.maxTranslate(),k=!0,m.allowMomentumBounce=!0):i=e.maxTranslate(),t.loop&&t.centeredSlides&&(T=!0);else if(i>e.minTranslate())t.freeMode.momentumBounce?(i-e.minTranslate()>B&&(i=e.minTranslate()+B),I=e.minTranslate(),k=!0,m.allowMomentumBounce=!0):i=e.minTranslate(),t.loop&&t.centeredSlides&&(T=!0);else if(t.freeMode.sticky){let o;for(let h=0;h<a.length;h+=1)if(a[h]>-i){o=h;break}Math.abs(a[o]-i)<Math.abs(a[o-1]-i)||e.swipeDirection==="next"?i=a[o]:i=a[o-1],i=-i}if(T&&x("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(c?n=Math.abs((-i-e.translate)/e.velocity):n=Math.abs((i-e.translate)/e.velocity),t.freeMode.sticky){const o=Math.abs((c?-i:i)-e.translate),h=e.slidesSizesGrid[e.activeIndex];o<h?n=t.speed:o<2*h?n=t.speed*1.5:n=t.speed*2.5}}else if(t.freeMode.sticky){e.slideToClosest();return}t.freeMode.momentumBounce&&k?(e.updateProgress(I),e.setTransition(n),e.setTranslate(i),e.transitionStart(!0,e.swipeDirection),e.animating=!0,j(d,()=>{!e||e.destroyed||!m.allowMomentumBounce||(v("momentumBounce"),e.setTransition(t.speed),setTimeout(()=>{e.setTranslate(I),j(d,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(v("_freeModeNoMomentumRelease"),e.updateProgress(i),e.setTransition(n),e.setTranslate(i),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,j(d,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(i),e.updateActiveIndex(),e.updateSlidesClasses()}else if(t.freeMode.sticky){e.slideToClosest();return}else t.freeMode&&v("_freeModeNoMomentumRelease");(!t.freeMode.momentum||l>=t.longSwipesMs)&&(v("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:P,onTouchMove:C,onTouchEnd:w}})}const ce="/FlurryPop/images/share-icon.svg",me={key:0,class:"w-full p-10 text-center"},pe={key:1,class:"ani-fade"},fe={class:"hidden sm:block text-[#85B1CA] text-xs sm:text-sm"},be={class:"flex gap-8 mt-0 sm:mt-2 flex-col md:flex-row lg:gap-12"},ve={class:"flex-1"},he={class:"hidden md:block"},ge=["src"],xe=["src"],we={key:0,class:"block md:hidden"},ye=["src"],Te=["src"],_e=["src"],Se=["src"],Me={key:1,class:"block md:hidden"},ke=["src"],Pe={class:"flex-1 relative"},Ce={class:"sticky top-27"},Ie={class:"absolute top-1 right-0 flex gap-3"},Be=["src"],Ee={class:"text-base sm:text-2xl font-bold"},Fe={class:"text-lg sm:text-xl font-bold text-[#3F88B4] mt-1 sm:mt-5"},Ae={class:"text-xs sm:text-sm border-l-5 border-[#BFD6E4] bg-[#F3F3F3] p-4 sm:p-5 text-justify mt-5 sm:mt-7"},De={class:"text-sm sm:text-base"},Le={class:"flex w-full mt-7"},Oe=["disabled"],Ve={class:"mt-10"},ze={class:"border-b border-b-gray-200 mb-5 flex space-x-1"},Re={__name:"ProductPage",setup(L){const e=Y(),A=X(),{isInlineLoading:v}=q(A),x=re(),{favoriteId:P,addLoading:C}=q(x),{addFavorite:w,addCart:p,share:r}=x,{currency:t,imgPath:d}=Z(),c=[de,ae,ue],a=O(null),m=T=>{a.value=T},y=e.params.productId,l=O({}),n=O(1);J(()=>{v.value=!0,M()});async function M(){let T=`https://vue3-course-api.hexschool.io/api/flurrypop-api/product/${y}`;try{const o=await K.get(T);l.value=o.data.product}catch(o){console.error(o)}finally{v.value=!1}}const i=O(1);function k(){i.value<151&&i.value++}function I(){i.value>1&&i.value--}Q(i,()=>{i.value<1&&(i.value=1)});async function B(){try{await p(l.value.id,i.value),i.value=1}catch{}}return(T,o)=>{const h=W("RouterLink");return g(),z(se,{title:"PRODUCT"},{default:_(()=>[f(v)?(g(),S("div",me,[E(ie)])):(g(),S("div",pe,[s("div",fe,[E(h,{to:{name:"user-product"},class:"hover:underline"},{default:_(()=>o[5]||(o[5]=[u("所有商品")])),_:1,__:[5]}),u(" / "+D(l.value.title),1)]),s("div",be,[s("div",ve,[s("div",he,[s("img",{src:l.value.imageUrl,alt:""},null,8,ge),(g(!0),S(R,null,U(l.value.imagesUrl,b=>(g(),S("img",{src:b,alt:""},null,8,xe))),256))]),l.value.imagesUrl?(g(),S("div",we,[E(f(G),{loop:!1,spaceBetween:10,thumbs:{swiper:a.value},modules:c,class:"mySwiper1"},{default:_(()=>[E(f(V),null,{default:_(()=>[s("img",{src:l.value.imageUrl,loading:"lazy"},null,8,ye)]),_:1}),(g(!0),S(R,null,U(l.value.imagesUrl,b=>(g(),z(f(V),null,{default:_(()=>[s("img",{src:b,loading:"lazy"},null,8,Te)]),_:2},1024))),256))]),_:1},8,["thumbs"]),E(f(G),{onSwiper:m,loop:!1,spaceBetween:10,slidesPerView:4,direction:"horizontal",freeMode:!0,watchSlidesProgress:!0,modules:c,class:"mySwiper2"},{default:_(()=>[E(f(V),null,{default:_(()=>[s("img",{src:l.value.imageUrl,loading:"lazy",class:"slider-img"},null,8,_e)]),_:1}),(g(!0),S(R,null,U(l.value.imagesUrl,b=>(g(),z(f(V),null,{default:_(()=>[s("img",{src:b,loading:"lazy",class:"slider-img"},null,8,Se)]),_:2},1024))),256))]),_:1})])):(g(),S("div",Me,[s("img",{src:l.value.imageUrl,alt:""},null,8,ke)]))]),s("div",Pe,[s("div",Ce,[s("div",Ie,[s("button",{onClick:o[0]||(o[0]=b=>f(w)(l.value.id)),class:"cursor-pointer transition duration-300 hover:scale-110"},[s("img",{src:`${f(P).indexOf(l.value.id)!=-1?`${f(d)}heart-solid-red-icon.svg`:`${f(d)}heart-hollow-red-icon.svg`}`,alt:"",class:"h-5.5"},null,8,Be)]),s("button",{onClick:o[1]||(o[1]=(...b)=>f(r)&&f(r)(...b)),class:"cursor-pointer transition duration-300 hover:scale-110"},o[6]||(o[6]=[s("img",{src:ce,alt:"",class:"h-5.5"},null,-1)]))]),s("div",Ee,D(l.value.title),1),s("div",Fe,"NT$ "+D(f(t)(l.value.price)),1),s("div",Ae,D(l.value.description),1),o[7]||(o[7]=s("div",{class:"mt-5 font-bold text-sm sm:text-base"},"主成分",-1)),s("div",De,D(l.value.content),1),s("div",Le,[s("button",{onClick:I,class:F([i.value>1?"cursor-pointer hover:bg-gray-100":"bg-gray-100","w-10 aspect-square border border-gray-200 text-center"])},"-",2),ee(s("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=b=>i.value=b),class:"flex-1 border-t border-b border-gray-200 text-center outline-none"},null,512),[[te,i.value,void 0,{number:!0,lazy:!0}]]),s("button",{onClick:k,class:"cursor-pointer hover:bg-gray-100 w-10 aspect-square border border-gray-200 text-center"},"+")]),s("button",{onClick:B,disabled:f(C),class:F([f(C)?"bg-gray-400":"cursor-pointer bg-[#3F88B4] hover:opacity-90","text-sm sm:text-base w-full text-white p-2 text-center mt-3 transition"])},"加入購物車 ",10,Oe)])])]),s("div",Ve,[s("div",ze,[s("button",{onClick:o[3]||(o[3]=b=>n.value=1),class:F([n.value==1?"text-[#3F88B4] border-b-4 border-b-[#3F88B4] ":"cursor-pointer border-b-2 border-b-transparent hover:opacity-80","text-sm sm:text-base px-4 py-2 transition mb-[-1px]"])}," 購買須知 ",2),s("button",{onClick:o[4]||(o[4]=b=>n.value=2),class:F([n.value==2?"text-[#3F88B4] border-b-4 border-b-[#3F88B4]":"cursor-pointer border-b-2 border-b-transparent hover:opacity-80","text-sm sm:text-base px-4 py-2 transition mb-[-1px]"])}," 退換貨須知 ",2)]),s("div",{class:F(n.value==1?"block ani-fade":"hidden opacity-0")},o[8]||(o[8]=[s("ul",{class:"text-xs sm:text-sm list-disc pl-5 space-y-2 text-justify"},[s("li",null,[u("可於 Flurry Pop 官方網站選購冰品，提供"),s("strong",null,"宅配"),u("與"),s("strong",null,"門市自取"),u("兩種方式。建議提前下單以保留心儀風味。")]),s("li",null,[u("我們採用"),s("strong",null,"黑貓冷凍宅配"),u("，全程低溫出貨，僅限"),s("strong",null,"台灣本島"),u("配送。出貨時間為付款後"),s("strong",null,"3–5 個工作天"),u("，特殊節日另行公告。")]),s("li",null,[u("門市提供預訂自取服務，請於結帳時選擇"),s("strong",null,"「門市自取」"),u("，並備註取貨時間。完成付款後，商品將為您保留"),s("strong",null,"2 日"),u("。")]),s("li",null,[u("冰品請於收到後"),s("strong",null,"立即放入冷凍（建議 -18°C 以下）"),u("。天然原料製作，不含防腐劑，建議於"),s("strong",null,"兩週內食用完畢"),u("，風味最佳。 ")]),s("li",null,"所有商品為冷凍保存之食品，因拍攝及顯示器差異，顏色與實品可能略有不同。產品外觀與裝飾可能因批次略有差異，敬請見諒。")],-1)]),2),s("div",{class:F(n.value==2?"block ani-fade":"hidden opacity-0")},o[9]||(o[9]=[s("ul",{class:"text-xs sm:text-sm list-disc pl-5 space-y-2 text-justify"},[s("li",null,[u("因本商品為食品類冷凍商品，依《消費者保護法》第19條及《通訊交易解除權合理例外情事適用準則》，"),s("strong",null,"不適用 7 日鑑賞期規範"),u("。")]),s("li",null,[u("商品經拆封、退冰、食用或因消費者保存不當導致變質，"),s("strong",null,"恕不接受退換貨"),u("。")]),s("li",null,[u("若您收到商品時發現有誤、缺件或瑕疵，請於"),s("strong",null,"到貨後 24 小時內"),u("，透過官方聯絡管道與我們聯繫，並提供相關照片與訂單資訊，我們將盡快為您處理。")]),s("li",null,"退換貨商品請保持原包裝完整（含外箱、配件、發票），以便後續作業。"),s("li",null,[u("如因個人因素（如：無人收貨、填寫錯誤地址、臨時更改心意）導致配送失敗或退件，"),s("strong",null,"將無法提供補寄或退款"),u("，敬請理解。")])],-1)]),2)])]))]),_:1})}}},Ge=H(Re,[["__scopeId","data-v-774232ad"]]);export{Ge as default};
