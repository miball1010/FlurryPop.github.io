import{a as B,s as A,o as R,J as $,r as M,c,d as n,e as l,m as u,h as o,A as x,k as r,N as p,D as y,j as m,z as S,w as j,i as F,l as v}from"./index-BIox9yog.js";import{_ as d}from"./BaseInput-CpB2k3DX.js";const E={class:"relative py-5 top-55 w-[90%] max-w-[1050px] mx-auto sm:py-0 sm:top-90"},L={class:"ani-fade flex flex-col gap-5 lg:flex-row"},O={class:"flex-2 flex flex-col gap-7 sm:gap-10"},P={class:"bg-white shadow-md py-5 px-4 sm:px-5 space-y-5 sm:p-10 sm:space-y-8"},Y={class:"bg-white shadow-md py-5 px-4 sm:px-5 space-y-5 sm:p-10 sm:space-y-8"},z={class:"flex items-center gap-2 cursor-pointer"},J={key:0},q={class:"flex gap-5"},G={class:"flex items-center gap-2 cursor-pointer"},H={class:"bg-white shadow-md py-5 px-4 sm:px-5 space-y-5 sm:p-10 sm:space-y-8"},I={class:"flex items-center gap-2 cursor-pointer"},K={key:0},Q={class:"flex gap-5"},W={class:"flex items-center gap-2 cursor-pointer"},X={class:"flex-1"},Z={class:"sticky top-25"},ee={class:"bg-white shadow-md p-4 sm:p-5 flex items-end flex-col"},le={class:"w-full border-b border-gray-200"},te={class:"flex justify-between mb-2 items-center"},se={class:""},ae={key:0,class:"flex items-center justify-between my-2"},oe={class:"font-bold"},de={class:"mt-2 mb-7 sm:mb-12"},ie={class:"ml-1 font-bold text-lg sm:text-xl text-[#7DB14A]"},ne={class:"flex gap-5"},me={__name:"Step2",setup(ue){const f=$(),{currency:b}=S(),g=B(),{step:_,total:i,freight:V}=A(g),{getProduct:k,getCheckProduct:D,checkOrder:T}=g;R(async()=>{_.value=2,await k(),await D(),i.value==0&&f.push("/")});const t=M({name:"",tel:"",email:"",delivery:"",city:"",area:"",address:"",pay:"",cardNumber:"",validDate:"",securityCode:""}),U=c(()=>t.value.delivery=="宅配"?i.value+V.value.price:i.value);async function N(){await T(t.value)&&f.push("/checkout/step3")}const w=c({get(){return t.value.cardNumber.replace(/\s+/g,"").replace(/(.{4})/g,"$1 ").trim()},set(a){t.value.cardNumber=a.replace(/\D/g,"").slice(0,16)}}),h=c({get(){let a=t.value.validDate.replace(/\D/g,"").slice(0,4);return a.length<=2?a:a.slice(0,2)+"/"+a.slice(2)},set(a){t.value.validDate=a.replace(/\D/g,"").slice(0,4)}});return(a,e)=>{const C=F("RouterLink");return v(),n("div",E,[l("div",L,[l("div",O,[l("div",null,[e[13]||(e[13]=l("div",{class:"font-bold mb-2 text-base sm:text-lg"},[u("基本資料 "),l("span",{class:"text-[#D8473A]"},"*")],-1)),l("div",P,[o(d,{inputType:"text",modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.name=s),id:"name",placeholder:" ",description:"姓名"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.tel,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.tel=s),id:"tel",placeholder:"0912345678",maxlength:10,description:"手機號碼"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.email,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.email=s),id:"email",placeholder:"sample@gmail.com",description:"Email "},null,8,["modelValue"])])]),l("div",null,[e[16]||(e[16]=l("div",{class:"font-bold mb-2 text-base sm:text-lg"},[u("寄送方式 "),l("span",{class:"text-[#D8473A]"},"*")],-1)),l("div",Y,[l("label",z,[r(l("input",{type:"radio",name:"delivery","onUpdate:modelValue":e[3]||(e[3]=s=>t.value.delivery=s),value:"宅配",class:"w-4 h-4"},null,512),[[p,t.value.delivery]]),e[14]||(e[14]=l("span",null,"宅配",-1))]),t.value.delivery=="宅配"?(v(),n("div",J,[l("div",q,[o(d,{inputType:"text",modelValue:t.value.city,"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.city=s),id:"city",placeholder:"",description:"縣市",class:"flex-1"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.area,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.area=s),id:"area",placeholder:"",description:"地區",class:"flex-1"},null,8,["modelValue"])]),o(d,{inputType:"text",modelValue:t.value.address,"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.address=s),id:"address",placeholder:"",description:"地址",class:"mt-2"},null,8,["modelValue"])])):x("",!0),l("label",G,[r(l("input",{type:"radio",name:"delivery","onUpdate:modelValue":e[7]||(e[7]=s=>t.value.delivery=s),value:"實體店取貨",class:"w-4 h-4"},null,512),[[p,t.value.delivery]]),e[15]||(e[15]=l("span",null,"實體店取貨",-1))])])]),l("div",null,[e[19]||(e[19]=l("div",{class:"font-bold mb-2 text-base sm:text-lg"},[u("付款方式 "),l("span",{class:"text-[#D8473A]"},"*")],-1)),l("div",H,[l("label",I,[r(l("input",{type:"radio",name:"card","onUpdate:modelValue":e[8]||(e[8]=s=>t.value.pay=s),value:"信用卡",class:"w-4 h-4"},null,512),[[p,t.value.pay]]),e[17]||(e[17]=l("span",null,"信用卡",-1))]),t.value.pay=="信用卡"?(v(),n("div",K,[o(d,{inputType:"text",modelValue:w.value,"onUpdate:modelValue":e[9]||(e[9]=s=>w.value=s),id:"cardNumber",maxlength:19,placeholder:"0000 0000 0000 0000",description:"卡號",class:"mb-2"},null,8,["modelValue"]),l("div",Q,[o(d,{inputType:"text",modelValue:h.value,"onUpdate:modelValue":e[10]||(e[10]=s=>h.value=s),id:"validDate",maxlength:5,placeholder:"MM/YY",description:"有效日期",class:"flex-1"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.securityCode,"onUpdate:modelValue":e[11]||(e[11]=s=>t.value.securityCode=s),id:"securityCode",maxlength:3,placeholder:"CVC",description:"安全碼",class:"flex-1"},null,8,["modelValue"])])])):x("",!0),l("label",W,[r(l("input",{type:"radio",name:"pay","onUpdate:modelValue":e[12]||(e[12]=s=>t.value.pay=s),value:"貨到付款",class:"w-4 h-4"},null,512),[[p,t.value.pay]]),e[18]||(e[18]=l("span",null,"貨到付款",-1))])])])]),l("div",X,[l("div",Z,[e[24]||(e[24]=l("div",{class:"font-bold mb-2 text-lg hidden lg:block"},"結帳明細",-1)),l("div",ee,[l("div",le,[l("div",te,[e[20]||(e[20]=l("div",{class:"text-sm sm:text-base"},"總金額",-1)),l("div",se,"NT$ "+y(m(b)(m(i))),1)]),t.value.delivery=="宅配"?(v(),n("div",ae,[e[21]||(e[21]=l("div",{class:"text-sm sm:text-base"},"宅配運費",-1)),l("div",oe,"+ NT$ "+y(m(V).price),1)])):x("",!0)]),l("div",de,[e[22]||(e[22]=l("span",{class:"font-bold text-sm sm:text-base"},"總計",-1)),l("span",ie,"NT$ "+y(m(b)(U.value)),1)]),l("div",ne,[o(C,{to:{name:"user-checkout-step1"},class:"btn border border-[#3F88B4] text-[#3F88B4] transition hover:opacity-70"},{default:j(()=>e[23]||(e[23]=[u(" 上一步 ")])),_:1,__:[23]}),l("button",{onClick:N,class:"btn bg-[#3F88B4] text-white transition hover:opacity-90"}," 下一步 ")])])])])])])}}};export{me as default};
