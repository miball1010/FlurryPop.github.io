import{s as D,o as B,I as R,l as $,c as v,a as n,b as l,e as o,y as c,p as u,K as r,B as y,f as p,x as M,w as S,r as j,h as m,i as E}from"./index-CUlOG4Po.js";import{_ as d}from"./BaseInput-BDDWEa8x.js";import{u as L}from"./userStore-ClwLFrP7.js";const O={class:"relative py-5 top-55 w-[90%] max-w-[1050px] mx-auto sm:py-0 sm:top-90"},P={class:"ani-fade flex flex-col gap-5 lg:flex-row"},Y={class:"flex-2 flex flex-col gap-7 sm:gap-10"},A={class:"bg-white shadow-md p-4 sm:p-5 space-y-5 sm:p-10 sm:space-y-8"},F={class:"bg-white shadow-md p-4 sm:p-5 space-y-5 sm:p-10 sm:space-y-8"},I={class:"flex items-center gap-2 cursor-pointer"},K={key:0},q={class:"flex gap-5"},z={class:"flex items-center gap-2 cursor-pointer"},G={class:"bg-white shadow-md p-4 sm:p-5 space-y-5 sm:p-10 sm:space-y-8"},H={class:"flex items-center gap-2 cursor-pointer"},J={key:0},Q={class:"flex gap-5"},W={class:"flex items-center gap-2 cursor-pointer"},X={class:"flex-1"},Z={class:"sticky top-25"},ee={class:"bg-white shadow-md p-4 sm:p-5 flex items-end flex-col gap-5"},le={class:"w-full border-b border-gray-200"},te={class:"flex justify-between my-2 items-center"},se={class:""},ae={key:0,class:"flex items-center justify-between my-2"},oe={class:"font-bold"},de={class:"ml-1 font-bold text-lg sm:text-xl text-[#3F88B4]"},ie={class:"flex gap-5"},me={__name:"Step2",setup(ne){const x=R(),{currency:f}=M(),g=L(),{step:h,total:i,freight:b}=D(g),{getProduct:T,getCheckProduct:U,checkOrder:k}=g;B(async()=>{h.value=2,await T(),await U(),i.value==0&&x.push("/")});const t=$({name:"",tel:"",email:"",delivery:"",city:"",area:"",address:"",pay:"",cardNumber:"",validDate:"",securityCode:""}),_=v(()=>t.value.delivery=="宅配"?i.value+b.value.price:i.value);async function C(){await k(t.value)&&x.push("/checkout/step3")}const V=v({get(){return t.value.cardNumber.replace(/\s+/g,"").replace(/(.{4})/g,"$1 ").trim()},set(a){t.value.cardNumber=a.replace(/\D/g,"").slice(0,16)}}),w=v({get(){let a=t.value.validDate.replace(/\D/g,"").slice(0,4);return a.length<=2?a:a.slice(0,2)+"/"+a.slice(2)},set(a){t.value.validDate=a.replace(/\D/g,"").slice(0,4)}});return(a,e)=>{const N=j("RouterLink");return m(),n("div",O,[l("div",P,[l("div",Y,[l("div",null,[e[13]||(e[13]=l("div",{class:"font-bold mb-2 text-base sm:text-lg"},"基本資料",-1)),l("div",A,[o(d,{inputType:"text",modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.name=s),id:"name",placeholder:"",description:"姓名"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.tel,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.tel=s),id:"tel",placeholder:"0912345678",maxlength:10,description:"手機號碼"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.email,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.email=s),id:"email",placeholder:"sample@gmail.com",description:"Email "},null,8,["modelValue"])])]),l("div",null,[e[16]||(e[16]=l("div",{class:"font-bold mb-2 text-base sm:text-lg"},"寄送方式",-1)),l("div",F,[l("label",I,[u(l("input",{type:"radio",name:"delivery","onUpdate:modelValue":e[3]||(e[3]=s=>t.value.delivery=s),value:"宅配",class:"w-4 h-4"},null,512),[[r,t.value.delivery]]),e[14]||(e[14]=l("span",null,"宅配",-1))]),t.value.delivery=="宅配"?(m(),n("div",K,[l("div",q,[o(d,{inputType:"text",modelValue:t.value.city,"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.city=s),id:"city",placeholder:"",description:"縣市",class:"flex-1"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.area,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.area=s),id:"area",placeholder:"",description:"地區",class:"flex-1"},null,8,["modelValue"])]),o(d,{inputType:"text",modelValue:t.value.address,"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.address=s),id:"address",placeholder:"",description:"地址",class:"mt-2"},null,8,["modelValue"])])):c("",!0),l("label",z,[u(l("input",{type:"radio",name:"delivery","onUpdate:modelValue":e[7]||(e[7]=s=>t.value.delivery=s),value:"實體店取貨",class:"w-4 h-4"},null,512),[[r,t.value.delivery]]),e[15]||(e[15]=l("span",null,"實體店取貨",-1))])])]),l("div",null,[e[19]||(e[19]=l("div",{class:"font-bold mb-2 text-base sm:text-lg"},"付款方式",-1)),l("div",G,[l("label",H,[u(l("input",{type:"radio",name:"card","onUpdate:modelValue":e[8]||(e[8]=s=>t.value.pay=s),value:"信用卡",class:"w-4 h-4"},null,512),[[r,t.value.pay]]),e[17]||(e[17]=l("span",null,"信用卡",-1))]),t.value.pay=="信用卡"?(m(),n("div",J,[o(d,{inputType:"text",modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=s=>V.value=s),id:"cardNumber",maxlength:19,placeholder:"0000 0000 0000 0000",description:"卡號",class:"mb-2"},null,8,["modelValue"]),l("div",Q,[o(d,{inputType:"text",modelValue:w.value,"onUpdate:modelValue":e[10]||(e[10]=s=>w.value=s),id:"validDate",maxlength:5,placeholder:"MM/YY",description:"有效日期",class:"flex-1"},null,8,["modelValue"]),o(d,{inputType:"text",modelValue:t.value.securityCode,"onUpdate:modelValue":e[11]||(e[11]=s=>t.value.securityCode=s),id:"securityCode",maxlength:3,placeholder:"CVC",description:"安全碼",class:"flex-1"},null,8,["modelValue"])])])):c("",!0),l("label",W,[u(l("input",{type:"radio",name:"pay","onUpdate:modelValue":e[12]||(e[12]=s=>t.value.pay=s),value:"貨到付款",class:"w-4 h-4"},null,512),[[r,t.value.pay]]),e[18]||(e[18]=l("span",null,"貨到付款",-1))])])])]),l("div",X,[l("div",Z,[e[24]||(e[24]=l("div",{class:"font-bold mb-2 text-lg hidden lg:block"},"結帳明細",-1)),l("div",ee,[l("div",le,[l("div",te,[e[20]||(e[20]=l("div",{class:"text-sm sm:text-base"},"總金額",-1)),l("div",se,"NT$ "+y(p(f)(p(i))),1)]),t.value.delivery=="宅配"?(m(),n("div",ae,[e[21]||(e[21]=l("div",{class:"text-sm sm:text-base"},"宅配運費",-1)),l("div",oe,"+ NT$ "+y(p(b).price),1)])):c("",!0)]),l("div",null,[e[22]||(e[22]=l("span",{class:"font-bold text-sm sm:text-base"},"總計",-1)),l("span",de,"NT$ "+y(p(f)(_.value)),1)]),l("div",ie,[o(N,{to:{name:"user-checkout-step1"},class:"btn bg-gray-300 text-white transition hover:opacity-90"},{default:S(()=>e[23]||(e[23]=[E(" 上一步 ")])),_:1,__:[23]}),l("button",{onClick:C,class:"btn bg-[#85B1CA] text-white transition hover:opacity-90"},"下一步")])])])])])])}}};export{me as default};
