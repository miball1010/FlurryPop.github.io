import{I as D}from"./InlineLoading-D2GAJRJf.js";import{u as N,s as g,N as O,o as T,l as h,c as I,a as l,b as s,t as n,f as a,e as M,F as v,j as b,h as i,B as r,x as P}from"./index-Dvx-3eVg.js";const y=""+new URL("../images/arrow-small.svg",import.meta.url).href,E={class:"flex gap-3 sm:gap-5 mb-7 sm:mb-5"},R={class:"w-full text-left"},U={key:0,class:"w-full p-10 text-center"},V={key:1},q={class:"border border-[#3F88B4] bg-[#3F88B4] flex justify-between p-3 items-center"},z={class:"text-sm text-white"},G={class:"text-xs sm:text-sm text-white"},H={class:"p-3 border border-gray-200 overflow-x-auto"},J={class:"flex mb-4 items-center"},K={class:"w-[calc(100%-100px)] font-bold"},Q={class:"flex-1"},W={class:"flex mb-4 items-center"},X={class:"flex-1 font-bold"},Y={class:"flex mb-4 items-center"},Z={class:"flex mb-4 items-center"},ss={class:"flex-1"},ts={class:"flex justify-end"},es=["onClick"],as={class:"mt-5 flex gap-2 justify-center items-center"},os=["disabled"],ls=["onClick","disabled"],ns=["disabled"],ms={__name:"Orders",setup(is){const k=N(),{isInlineLoading:_}=g(k),w=O(),{orders:x,pagination:o,productCount:C}=g(w),{getOrder:m,openOrderModal:B,loadMore:rs}=w,{currency:L,date:S}=P();T(()=>{_.value=!0,setTimeout(async()=>{await m()},100)});const c=h("all"),f=h(!0),$=I(()=>{if(c.value=="all")return x.value;if(c.value=="home")return x.value.filter(d=>d.user.address!="實體店取貨");if(c.value=="shop")return x.value.filter(d=>d.user.address=="實體店取貨")});async function p(d){f.value=!1,c.value=d,await m(1),setTimeout(()=>{f.value=!0},1)}async function A(d){await m(d)}async function F(){await m(o.value.current_page-1)}async function j(){await m(o.value.current_page+1)}return(d,t)=>(i(),l(v,null,[s("div",E,[s("button",{onClick:t[0]||(t[0]=e=>p("all")),class:n(c.value=="all"?"btn-dark":"btn-white")},"ALL",2),s("button",{onClick:t[1]||(t[1]=e=>p("home")),class:n(c.value=="home"?"btn-dark":"btn-white")},"宅配",2),s("button",{onClick:t[2]||(t[2]=e=>p("shop")),class:n(c.value=="shop"?"btn-dark":"btn-white")},"店取",2)]),s("div",R,[a(_)?(i(),l("div",U,[M(D)])):(i(),l("div",V,[s("div",{class:n([{"ani-fade":f.value},"flex flex-wrap gap-4 opacity-0"])},[(i(!0),l(v,null,b($.value,e=>(i(),l("div",{key:e.id,class:"w-[100%] lg:w-[calc((100%-16px)/2)]"},[s("div",q,[s("div",z,r(a(S)(e.create_at)),1),s("div",G,r(e.id),1)]),s("div",H,[s("div",J,[t[3]||(t[3]=s("div",{class:"w-20 sm:w-25 text-sm sm:text-base"},"Email",-1)),s("div",K,r(e.user.email),1)]),s("div",{class:n(["flex mb-4",{"items-center":a(C)<2}])},[t[4]||(t[4]=s("div",{class:"w-20 sm:w-25 text-sm sm:text-base"},"購買款項",-1)),s("div",Q,[(i(!0),l(v,null,b(e.products,u=>(i(),l("div",{key:u.id},r(u.product.title)+" x"+r(u.qty),1))),128))])],2),s("div",W,[t[5]||(t[5]=s("div",{class:"w-20 sm:w-25 text-sm sm:text-base"},"應付金額",-1)),s("div",X," NT$ "+r(a(L)(e.total)),1)]),s("div",Y,[t[6]||(t[6]=s("div",{class:"w-20 sm:w-25 text-sm sm:text-base"},"付款狀況",-1)),s("div",{class:n(["flex-1 font-bold",e.is_paid?"text-[#7DB14A]":"text-[#D8473A]"])},r(e.is_paid?"已付款":"未付款"),3)]),s("div",Z,[t[7]||(t[7]=s("div",{class:"w-20 sm:w-25 text-sm sm:text-base"},"寄送方式",-1)),s("div",ss,r(e.user.address=="實體店取貨"?"店取":"宅配"),1)]),t[8]||(t[8]=s("div",{class:"flex mb-4 items-center"},[s("div",{class:"w-20 sm:w-25 text-sm sm:text-base"},"出貨狀態"),s("div",{class:"flex-1 font-bold text-[#D8473A]"},"未出貨")],-1)),s("div",ts,[s("button",{class:"font-semibold btn-white",onClick:u=>a(B)(e)},"詳細",8,es)])])]))),128))],2),s("div",as,[s("button",{onClick:F,disabled:!a(o).has_pre,class:n([a(o).has_pre?"cursor-pointer hover:scale-110 opacity-60":"opacity-20","p-2 transition duration-3"])},t[9]||(t[9]=[s("img",{src:y,alt:"",class:"h-3 scale-[-1]"},null,-1)]),10,os),(i(!0),l(v,null,b(a(o).total_pages,(e,u)=>(i(),l("button",{onClick:ds=>A(e),disabled:a(o).current_page==e,key:u,class:n([a(o).current_page==e?"text-[#3F88B4]":"cursor-pointer hover:underline","p-1 text-sm sm:text-base"])},r(e),11,ls))),128)),s("button",{onClick:j,disabled:!a(o).has_next,class:n([a(o).has_next?"cursor-pointer hover:scale-110 opacity-60":"opacity-20","p-2 transition duration-3"])},t[10]||(t[10]=[s("img",{src:y,alt:"",class:"h-3"},null,-1)]),10,ns)])]))])],64))}};export{ms as default};
