import{_ as X,u as Y,s as G,a as J,r as D,B as K,o as Q,C as W,t as Z,q as V,w as M,i as ee,l as g,d as T,h as B,e as s,m as a,D as O,F as j,p as $,j as b,z as te,k as se,y as E,v as ie}from"./index-BIox9yog.js";import{B as oe}from"./BaseLayout-HmKS7wxg.js";import{I as re}from"./InlineLoading-CnSJLVu_.js";import{s as le}from"./smallLoading-D-XVb1Oh.js";import{g as ne,i as ae,e as ue,n as N,b as q,S as H,N as de,a as z}from"./navigation-Bp0D8F9K.js";function ce(R){let{swiper:e,extendParams:L,on:w}=R;L({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let _=!1,C=!1;e.thumbs={swiper:null};function k(){const o=e.thumbs.swiper;if(!o||o.destroyed)return;const t=o.clickedIndex,u=o.clickedSlide;if(u&&u.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof t>"u"||t===null)return;let d;o.params.loop?d=parseInt(o.clickedSlide.getAttribute("data-swiper-slide-index"),10):d=t,e.params.loop?e.slideToLoop(d):e.slideTo(d)}function S(){const{thumbs:o}=e.params;if(_)return!1;_=!0;const t=e.constructor;if(o.swiper instanceof t){if(o.swiper.destroyed)return _=!1,!1;e.thumbs.swiper=o.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(ae(o.swiper)){const u=Object.assign({},o.swiper);Object.assign(u,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new t(u),C=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",k),!0}function v(o){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const u=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():t.params.slidesPerView;let d=1;const n=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(d=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(d=1),d=Math.floor(d),t.slides.forEach(c=>c.classList.remove(n)),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let c=0;c<d;c+=1)ue(t.slidesEl,`[data-swiper-slide-index="${e.realIndex+c}"]`).forEach(i=>{i.classList.add(n)});else for(let c=0;c<d;c+=1)t.slides[e.realIndex+c]&&t.slides[e.realIndex+c].classList.add(n);const f=e.params.thumbs.autoScrollOffset,y=f&&!t.params.loop;if(e.realIndex!==t.realIndex||y){const c=t.activeIndex;let i,x;if(t.params.loop){const l=t.slides.find(p=>p.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);i=t.slides.indexOf(l),x=e.activeIndex>e.previousIndex?"next":"prev"}else i=e.realIndex,x=i>e.previousIndex?"next":"prev";y&&(i+=x==="next"?f:-1*f),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(i)<0&&(t.params.centeredSlides?i>c?i=i-Math.floor(u/2)+1:i=i+Math.floor(u/2)-1:i>c&&t.params.slidesPerGroup,t.slideTo(i,o?0:void 0))}}w("beforeInit",()=>{const{thumbs:o}=e.params;if(!(!o||!o.swiper))if(typeof o.swiper=="string"||o.swiper instanceof HTMLElement){const t=ne(),u=()=>{const n=typeof o.swiper=="string"?t.querySelector(o.swiper):o.swiper;if(n&&n.swiper)o.swiper=n.swiper,S(),v(!0);else if(n){const f=`${e.params.eventsPrefix}init`,y=c=>{o.swiper=c.detail[0],n.removeEventListener(f,y),S(),v(!0),o.swiper.update(),e.update()};n.addEventListener(f,y)}return n},d=()=>{if(e.destroyed)return;u()||requestAnimationFrame(d)};requestAnimationFrame(d)}else S(),v(!0)}),w("slideChange update resize observerUpdate",()=>{v()}),w("setTransition",(o,t)=>{const u=e.thumbs.swiper;!u||u.destroyed||u.setTransition(t)}),w("beforeDestroy",()=>{const o=e.thumbs.swiper;!o||o.destroyed||C&&o.destroy()}),Object.assign(e.thumbs,{init:S,update:v})}function me(R){let{swiper:e,extendParams:L,emit:w,once:_}=R;L({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function C(){if(e.params.cssMode)return;const v=e.getTranslate();e.setTranslate(v),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function k(){if(e.params.cssMode)return;const{touchEventsData:v,touches:o}=e;v.velocities.length===0&&v.velocities.push({position:o[e.isHorizontal()?"startX":"startY"],time:v.touchStartTime}),v.velocities.push({position:o[e.isHorizontal()?"currentX":"currentY"],time:N()})}function S(v){let{currentPos:o}=v;if(e.params.cssMode)return;const{params:t,wrapperEl:u,rtlTranslate:d,snapGrid:n,touchEventsData:f}=e,c=N()-f.touchStartTime;if(o<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(o>-e.maxTranslate()){e.slides.length<n.length?e.slideTo(n.length-1):e.slideTo(e.slides.length-1);return}if(t.freeMode.momentum){if(f.velocities.length>1){const m=f.velocities.pop(),r=f.velocities.pop(),U=m.position-r.position,h=m.time-r.time;e.velocity=U/h,e.velocity/=2,Math.abs(e.velocity)<t.freeMode.minimumVelocity&&(e.velocity=0),(h>150||N()-m.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=t.freeMode.momentumVelocityRatio,f.velocities.length=0;let i=1e3*t.freeMode.momentumRatio;const x=e.velocity*i;let l=e.translate+x;d&&(l=-l);let p=!1,P;const I=Math.abs(e.velocity)*20*t.freeMode.momentumBounceRatio;let F;if(l<e.maxTranslate())t.freeMode.momentumBounce?(l+e.maxTranslate()<-I&&(l=e.maxTranslate()-I),P=e.maxTranslate(),p=!0,f.allowMomentumBounce=!0):l=e.maxTranslate(),t.loop&&t.centeredSlides&&(F=!0);else if(l>e.minTranslate())t.freeMode.momentumBounce?(l-e.minTranslate()>I&&(l=e.minTranslate()+I),P=e.minTranslate(),p=!0,f.allowMomentumBounce=!0):l=e.minTranslate(),t.loop&&t.centeredSlides&&(F=!0);else if(t.freeMode.sticky){let m;for(let r=0;r<n.length;r+=1)if(n[r]>-l){m=r;break}Math.abs(n[m]-l)<Math.abs(n[m-1]-l)||e.swipeDirection==="next"?l=n[m]:l=n[m-1],l=-l}if(F&&_("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(d?i=Math.abs((-l-e.translate)/e.velocity):i=Math.abs((l-e.translate)/e.velocity),t.freeMode.sticky){const m=Math.abs((d?-l:l)-e.translate),r=e.slidesSizesGrid[e.activeIndex];m<r?i=t.speed:m<2*r?i=t.speed*1.5:i=t.speed*2.5}}else if(t.freeMode.sticky){e.slideToClosest();return}t.freeMode.momentumBounce&&p?(e.updateProgress(P),e.setTransition(i),e.setTranslate(l),e.transitionStart(!0,e.swipeDirection),e.animating=!0,q(u,()=>{!e||e.destroyed||!f.allowMomentumBounce||(w("momentumBounce"),e.setTransition(t.speed),setTimeout(()=>{e.setTranslate(P),q(u,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(w("_freeModeNoMomentumRelease"),e.updateProgress(l),e.setTransition(i),e.setTranslate(l),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,q(u,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(l),e.updateActiveIndex(),e.updateSlidesClasses()}else if(t.freeMode.sticky){e.slideToClosest();return}else t.freeMode&&w("_freeModeNoMomentumRelease");(!t.freeMode.momentum||c>=t.longSwipesMs)&&(w("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:C,onTouchMove:k,onTouchEnd:S}})}const pe=""+new URL("../images/share-icon.svg",import.meta.url).href,fe={key:0,class:"w-full p-10 text-center"},ve={key:1,class:"ani-fade"},be={class:"hidden sm:block text-[#85B1CA] text-xs sm:text-sm"},he={class:"flex gap-8 mt-0 sm:mt-2 flex-col md:flex-row lg:gap-12"},ge={class:"w-full lg:w-[calc((100%-48px)/2)]"},xe={class:"hidden md:block"},we=["src","alt"],ye=["src","alt"],Te={key:0,class:"block md:hidden"},_e=["src"],Se=["src"],Me=["src"],ke=["src"],Ce={key:1,class:"block md:hidden"},Pe=["src","alt"],Ie={class:"w-full lg:w-[calc((100%-48px)/2)] relative"},Be={class:"sticky top-27"},Ee={class:"absolute top-1 right-0 flex gap-3"},Le=["src"],Fe={class:"text-base sm:text-2xl font-bold"},Ae={class:"text-lg sm:text-xl font-bold text-[#3F88B4] mt-1 sm:mt-5"},De={class:"text-xs sm:text-sm border-l-5 border-[#BFD6E4] bg-[#F3F3F3] p-4 sm:p-5 text-justify mt-5 sm:mt-7"},Oe={class:"text-sm sm:text-base"},Re={class:"flex w-full mt-7"},Ve=["disabled"],ze={key:0},Ue={class:"mt-10"},je={class:"border-b border-b-gray-200 mb-5 flex space-x-1"},$e={__name:"ProductPage",setup(R){const e=K(),L=Y(),{isInlineLoading:w}=G(L),_=J(),{favoriteId:C,activeProductId:k}=G(_),{addFavorite:S,addCart:v,shareLink:o}=_,{currency:t,imgPath:u}=te(),d=[me,de,ce],n=D(null),f=m=>{n.value=m},y=D(!1),c=e.params.productId,i=D({}),x=D(1);Q(()=>{y.value=!0,l()});async function l(){let m=`https://vue3-course-api.hexschool.io/api/flurrypop-api/product/${c}`;try{const r=await W.get(m);i.value=r.data.product}catch(r){console.error(r)}finally{y.value=!1}}const p=D(1);function P(){p.value<151&&p.value++}function I(){p.value>1&&p.value--}Z(p,()=>{p.value<1&&(p.value=1)});async function F(){try{await v(i.value.id,p.value),p.value=1}catch(m){console.log(m)}}return(m,r)=>{const U=ee("RouterLink");return g(),V(oe,{title:"PRODUCT"},{default:M(()=>[y.value?(g(),T("div",fe,[B(re)])):(g(),T("div",ve,[s("div",be,[B(U,{to:{name:"user-product"},class:"hover:underline"},{default:M(()=>r[5]||(r[5]=[a("所有商品")])),_:1,__:[5]}),a(" / "+O(i.value.title),1)]),s("div",he,[s("div",ge,[s("div",xe,[s("img",{src:i.value.imageUrl,alt:i.value.title},null,8,we),(g(!0),T(j,null,$(i.value.imagesUrl,(h,A)=>(g(),T("img",{src:h,alt:i.value.title,key:A},null,8,ye))),128))]),i.value.imagesUrl?(g(),T("div",Te,[B(b(H),{loop:!1,spaceBetween:10,thumbs:{swiper:n.value},modules:d,class:"mySwiper1"},{default:M(()=>[B(b(z),null,{default:M(()=>[s("img",{src:i.value.imageUrl,loading:"lazy"},null,8,_e)]),_:1}),(g(!0),T(j,null,$(i.value.imagesUrl,(h,A)=>(g(),V(b(z),{key:A},{default:M(()=>[s("img",{src:h,loading:"lazy"},null,8,Se)]),_:2},1024))),128))]),_:1},8,["thumbs"]),B(b(H),{onSwiper:f,loop:!1,spaceBetween:10,slidesPerView:4,direction:"horizontal",freeMode:!0,watchSlidesProgress:!0,modules:d,class:"mySwiper2"},{default:M(()=>[B(b(z),null,{default:M(()=>[s("img",{src:i.value.imageUrl,loading:"lazy",class:"slider-img"},null,8,Me)]),_:1}),(g(!0),T(j,null,$(i.value.imagesUrl,(h,A)=>(g(),V(b(z),{key:A},{default:M(()=>[s("img",{src:h,loading:"lazy",class:"slider-img"},null,8,ke)]),_:2},1024))),128))]),_:1})])):(g(),T("div",Ce,[s("img",{src:i.value.imageUrl,alt:i.value.title},null,8,Pe)]))]),s("div",Ie,[s("div",Be,[s("div",Ee,[s("button",{onClick:r[0]||(r[0]=h=>b(S)(i.value.id)),class:"cursor-pointer transition duration-300 hover:scale-110"},[s("img",{src:`${b(C).indexOf(i.value.id)!=-1?`${b(u)}heart-solid-red-icon.svg`:`${b(u)}heart-hollow-red-icon.svg`}`,alt:"heart-icon",class:"h-5.5"},null,8,Le)]),s("button",{onClick:r[1]||(r[1]=(...h)=>b(o)&&b(o)(...h)),class:"cursor-pointer transition duration-300 hover:scale-110"},r[6]||(r[6]=[s("img",{src:pe,alt:"share-icon",class:"h-5.5"},null,-1)]))]),s("div",Fe,O(i.value.title),1),s("div",Ae," NT$ "+O(b(t)(i.value.price)),1),s("div",De,O(i.value.description),1),r[7]||(r[7]=s("div",{class:"mt-5 font-bold text-sm sm:text-base"},"主成分",-1)),s("div",Oe,O(i.value.content),1),s("div",Re,[s("button",{onClick:I,class:E([p.value>1?"cursor-pointer hover:bg-gray-100":"bg-gray-100","w-10 h-10 border border-gray-200 text-center"])}," - ",2),se(s("input",{type:"number","onUpdate:modelValue":r[2]||(r[2]=h=>p.value=h),class:"w-[calc(100%-80px)] border-t border-b border-gray-200 text-center outline-none"},null,512),[[ie,p.value,void 0,{number:!0,lazy:!0}]]),s("button",{onClick:P,class:"w-10 h-10 cursor-pointer hover:bg-gray-100 border border-gray-200 text-center"}," + ")]),s("button",{onClick:F,disabled:b(k)==i.value.id,class:E([b(k)==i.value.id?"bg-gray-400":"cursor-pointer bg-[#3F88B4] hover:opacity-90","flex justify-center items-center text-sm sm:text-base w-full text-white p-3 text-center mt-3 transition"])},[b(k)!=i.value.id?(g(),T("span",ze,"加入購物車")):(g(),V(le,{key:1,color:"white"}))],10,Ve)])])]),s("div",Ue,[s("div",je,[s("button",{onClick:r[3]||(r[3]=h=>x.value=1),class:E([x.value==1?"text-[#3F88B4] border-b-4 border-b-[#3F88B4] ":"cursor-pointer border-b-2 border-b-transparent hover:opacity-80","text-sm sm:text-base px-4 py-2 transition mb-[-1px]"])}," 購買須知 ",2),s("button",{onClick:r[4]||(r[4]=h=>x.value=2),class:E([x.value==2?"text-[#3F88B4] border-b-4 border-b-[#3F88B4]":"cursor-pointer border-b-2 border-b-transparent hover:opacity-80","text-sm sm:text-base px-4 py-2 transition mb-[-1px]"])}," 退換貨須知 ",2)]),s("div",{class:E(x.value==1?"block ani-fade":"hidden opacity-0")},r[8]||(r[8]=[s("ul",{class:"text-xs sm:text-sm list-disc pl-5 space-y-2 text-justify"},[s("li",null,[a(" 可於 Flurry Pop 官方網站選購冰品，提供"),s("strong",null,"宅配"),a("與"),s("strong",null,"門市自取"),a("兩種方式。建議提前下單以保留心儀風味。 ")]),s("li",null,[a(" 我們採用"),s("strong",null,"黑貓冷凍宅配"),a("，全程低溫出貨，僅限"),s("strong",null,"台灣本島"),a("配送。出貨時間為付款後"),s("strong",null,"3–5 個工作天"),a("，特殊節日另行公告。 ")]),s("li",null,[a(" 門市提供預訂自取服務，請於結帳時選擇"),s("strong",null,"「門市自取」"),a("，並備註取貨時間。完成付款後，商品將為您保留"),s("strong",null,"2 日"),a("。 ")]),s("li",null,[a(" 冰品請於收到後"),s("strong",null,"立即放入冷凍（建議 -18°C 以下）"),a("。天然原料製作，不含防腐劑，建議於"),s("strong",null,"兩週內食用完畢"),a("，風味最佳。 ")]),s("li",null," 所有商品為冷凍保存之食品，因拍攝及顯示器差異，顏色與實品可能略有不同。產品外觀與裝飾可能因批次略有差異，敬請見諒。 ")],-1)]),2),s("div",{class:E(x.value==2?"block ani-fade":"hidden opacity-0")},r[9]||(r[9]=[s("ul",{class:"text-xs sm:text-sm list-disc pl-5 space-y-2 text-justify"},[s("li",null,[a(" 因本商品為食品類冷凍商品，依《消費者保護法》第19條及《通訊交易解除權合理例外情事適用準則》，"),s("strong",null,"不適用 7 日鑑賞期規範"),a("。 ")]),s("li",null,[a(" 商品經拆封、退冰、食用或因消費者保存不當導致變質，"),s("strong",null,"恕不接受退換貨"),a("。 ")]),s("li",null,[a(" 若您收到商品時發現有誤、缺件或瑕疵，請於"),s("strong",null,"到貨後 24 小時內"),a("，透過官方聯絡管道與我們聯繫，並提供相關照片與訂單資訊，我們將盡快為您處理。 ")]),s("li",null,"退換貨商品請保持原包裝完整（含外箱、配件、發票），以便後續作業。"),s("li",null,[a(" 如因個人因素（如：無人收貨、填寫錯誤地址、臨時更改心意）導致配送失敗或退件，"),s("strong",null,"將無法提供補寄或退款"),a("，敬請理解。 ")])],-1)]),2)])]))]),_:1})}}},Ye=X($e,[["__scopeId","data-v-712a6a50"]]);export{Ye as default};
